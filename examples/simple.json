
{
    "streams" : [
        {
            "name": "local_simple_data",
            "data_format": "dataspin",
            "url": "watch+local://./tmp/source"
        }
    ],
    "storages": [
        {
            "name": "simple_target",
            "url": "local://./tmp/target/{app_id}"
        }
    ],
    "data_processes":[
        {
            "name": "split and build index",
            "description": "",
            "source": "local_simple_data",
            "processes":[
                {
                    "name":"split by app_id",
                    "function": "splitby",
                    "args":   ["app_id"],
                    "kv_args": {}
                },
                {
                    "name": "build primary key index",
                    "function": "pk_index",
                    "args": [],
                    "kv_args": {
                        "key": "app_id, event_id"
                    }
                },
                {
                    "name": "save to target",
                    "function": "save",
                    "args": {
                        "location": "simple_target"
                    }
                }
            ]
        }
    ]
}