
{
    "streams" : [
        {
            "name": "source_name",
            "data_format": "aws|dataspin|, #format of data",
            "url": "sqs://us-east-1/{sqs_name}?access_key=xx&secret_key=yy"
        }
    ],
    "storages": [
        {
            "name": "app_home",
            "url": "s3://xxx/{app_id}/"
        }
    ],
    "tables":[
        {
            "name": "tableName",
            "storage": "location of storage",
            "storages": [],
            "schema": {

            }
        }
    ],
    "pk_caches": [
        {
            "name": "",
            "description": "used for deduplicate data",
            "url": "redis://xx/",
            "timeout": "1h"
        }
    ],
    "webhooks": [
        {
            "url": "/xxx/xxx",
            "default_action": "save_to_queue",
            "accept":["tableName"]
        }
    ],
    "data_processes":[
        {
            "name": "",
            "description": "",
            "source": "source_name",
            "processes":[
                {
                    "name":"",
                    "function": "splitby",
                    "args":   ["app_id"],
                    "kv_args": {}
                },
                {
                    "name": "",
                    "function": "deduplicate",
                    "kv_args": {
                        "pk_cache": "cache_cluster_name"
                    }
                },
                {
                    "name": "",
                    "function": "pk_index",
                    "args": [],
                    "kv_args": {
                        "key": "app_id, event_id"
                    }
                },
                {
                    "name": "",
                    "function": "save",
                    "args": []
                }
            ]
        },
        {
            "name": "",
            "description": "",
            "source": "source_name",
            "schedule": "h+10m",
            "conditions": "//wait for all data in some time.",
            "processes": [
                {
                    "name": "",
                    "function": "merge_file",
                    "args": [],
                    "kv_args": {
                        "format": "parquet"
                    }
                },
                {
                    "name": "",
                    "function": "deduplicate",
                    "kv_args": {
                        "pk_index": "pk",
                        "duration": "3h"
                    }
                },
                {
                    "name": "pk",
                    "function": "pk_index",
                    "args": [],
                    "kv_args": {
                        "key": "app_id, event_id"
                    }
                },
                {
                    "name": "",
                    "function": "save",
                    "args": [],
                    "kv_args": {
                        "path": "s3://"
                    }
                }
            ]
        }
    ]
}